# Wordpress Plugin Starter

## Description

A boiler-plate for a wordpress plugin. WordPress Plugin Starter helps you create fully functional WordPress plugins quickly and in a way that is easy to debug. It allows you create WordPress plugins in an object oriented pattern.

## Features

- Admin Notices
- Ajax
- Admin Menus
- Nav Menus Metaboxes
- Post Columns
- Post Metaboxes
- Settings
- Taxonomy Form Fields
- Post Types
- Taxonomies
- Shortcodes

## Installation

1. Clone the repository by running `git clone https://github.com/codestartechnologies/wordpress-plugin-starter.git` in your C.L.I

2. Change the **header fields** in **wordpress-plugin-starter.php** to match the header fields required by your plugin. (do not add any other code inside this file)

3. Rename the cloned folder to the slug name you wish to give your plugin

4. Rename the plugin main file (**wordpress-plugin-starter.php**) to the slug name you wish to give your plugin (must be identical with the name of the parent folder)

5. The **app** directory contains sample classes that will guide you on how to start adding functionalities to your plugin

## Compatibility

**WordPress Plugin Starter** is compatible with [WordPress](https://wordpress.org) version *5.6.5* to *6.0.2*, and [PHP](https://php.net) version *8.0* up.

## Project Folders

### app

The **app** directory is where all the classes that you will create for adding functionalities to your plugin will reside. This directory contains two folders: **Admin** and **Public**.

The **Admin** folder contains folders with classes that will add functionalities for creating: admin notices, ajax request for admin area, admin menu pages, custom post columns, metaboxes, custom form fields for taxonomies, and registering settings with setting sections and fields.

The **Public** folder contains folders with classes that will add functionalities for creating: custom post types, custom taxonomies, shortcodes, and ajax requests for site front-end area.

**app** directory also contains **Bindings.php** class file for registering class bindings, **Constants.php** class file where you define your custom constants, **functions.php** class file where you create custom helper functions, and **Hooks.php** class file for adding custom action and filter hooks that will run at both the admin area and site front-end.

### assets

The **assets** directory contains assets for creating your plugin. Examples are: css files, javascript files, image files, etc.

### configs

The **configs** directory contains configuration files that you can use to alter default options that comes with the boiler-plate. It also contain **routes.php** file where you specify custom routes your plugin will register.

### languages

The **languages** directory contains your theme's language translation files. Examples are your POT files, PO files, and MO files.

### logs

The **logs** directory contains log files generated by **WordPress Plugin Starter**.

### src

The **src** directory contains the core project files. You don't have to edit any file in this directory.

### vendor

The **vendor** directory contains files created by packages that your theme will require. You don't have to edit any file in this directory.

### views

The **views** directory contains files that will be included at specific places within your theme. Examples are views that will be used to display content for an admin menu page, admin notice, custom post column, metabox, setting field, taxonomy form field, shortcode or a custom route page.

## Getting Started

### Create An Admin Notice

To create an admin notice, navigate to **app > Admin > AdminNotices** directory and create a new php file with the same name as the class which will be used to create the notification. For example, create a **HelloWorldNotice.php** file, next create **HelloWorldNotice** class.

    <?php

    // HelloWorldNotice.php

    namespace WPS_Plugin\App\Admin\AdminNotices;

    class HelloWorldNotice {
        ...
    }

The **HelloWorldNotice** class needs to extend `Codestartechnologies\WordpressThemeStarter\Abstracts\AdminNotice` abstract class, which is the main class responsible for registering the hooks needed to create the admin notice.

    <?php

    // HelloWorldNotice.php

    namespace WPS_Plugin\App\Admin\AdminNotices;

    use Codestartechnologies\WordpressPluginStarter\Abstracts\AdminNotices;

    class HelloWorldNotice extends AdminNotices {
        ...
    }

After extending the **AdminNotice** abstract class, define a constructor method. Inside the constructor, specify the path to the view that will be used to display the notice inside `$view` property. You will also need to implement the `view_args()` method of the **AdminNotice** abstract class. This method returns an array with the arguments you want to be made avalable in the notice view file. You can return an empty array.

    ...

    class HelloWorldNotice extends AdminNotices {
        /**
         *  Constructor method
         */
        public function __construct()
        {
            $this->view = 'admin-notices.hello-world';
        }

        /**
         * The arguements to pass to the view
         *
         * @return array
         */
        public function view_args() : array
        {
            return array(
                'message'   => esc_html__( 'Hello World!', 'plugin-slug' ),
            );
        }
    }

Next, navigate to **views > admin > admin-notices** directory and create the view file for the notification: **hello-world.php**. Add the code below to the view file:

    <?php

    /**
    * $message     - Passed to the view from HelloWorldNotice Class
    *
    */

    ?>

    <div class="notice notice-info is-dismissible">
        <p> <?php echo $message; ?> </p>
    </div>

After customizing the output of the notice, open **Bindings.php** located in the **app** directory (this file contains **Bindings** class for registering classes that will add functionalities to your plugin). Locate `$admin_notices` property which is an array that contains all classes for creating admin notice, add `HelloWorldNotice::class` to the array.

    ...

    use WPS_Plugin\App\Admin\AdminNotices\HelloWorldNotice;

    ...

    final class Bindings {

        ...

        /**
         * Bindings for classes that create admin notices
         *
         * @static
         * @access public
         * @var array
         * @since 1.0.0
         */
        public static array $admin_notices = array(
            ...,
            HelloWorldNotice::class,
        );

    }

To get started quickly, see **WPSAdminNotice** class defined in **app > Admin > AdminNotices > WPSAdminNotice.php**.

### Create An Ajax Request For Admin Area

See **WPSAdminAjaxRequest** class defined in **app > Admin > AjaxRequests > WPSAdminAjaxRequest.php** to create an ajax request for use in admin area.

### Create An Ajax Request For Site Front-End Area

See **WPSPublicAjaxRequest** class defined in **app > Public > AjaxRequests > WPSPublicAjaxRequest.php** to create an ajax request for use in site front-end area.

### Create An Admin Menu Page

See **WPSMenu** class defined in **app > Admin > Menus > WPSMenu.php** to create a custom admin menu page.

See **WPSSubMenu** class defined in **app > Admin > Menus > WPSSubMenu.php** to create a custom admin sub menu page.

See **WPSSettingMenu** class defined in **app > Admin > Menus > WPSSettingMenu.php** to create a custom admin settings page.

See **WPSPluginMenu** class defined in **app > Admin > Menus > WPSPluginMenu.php** to create a custom admin plugins page.

### Create A Nav Menu Metabox

See **WPSNavMenuMetabox** class defined in **app > Admin > NavMenuMetaboxes > WPSNavMenuMetabox.php** to create a custom nav menu metabox.

### Create A Custom Post Column

See **WPSPostColumn** class defined in **app > Admin > PostColumns > WPSPostColumn.php** to create a custom post column.

### Create A Post Metabox

See **WPSPostMetabox** class defined in **app > Admin > PostMetaboxes > WPSPostMetabox.php** to create a custom post metabox.

### Create A Setting With Section And Field

See **WPSSetting** class defined in **app > Admin > Settings > WPSSetting.php** to register a setting with a custom section and field.

### Create A Custom Form Field For A Taxonomy

See **WPSTaxonomyFormField** class defined in **app > Admin > TaxonomyFormFields > WPSTaxonomyFormField.php** to create a custom form field for a taxonomy.

### Create A Custom Post Type

See **WPSPostType** class defined in **app > Public > PostTypes > WPSPostType.php** to create a custom post type.

### Create A Custom Taxonomy

See **WPSTaxonomy** class defined in **app > Public > Taxonomies > WPSTaxonomy.php** to create a custom taxonomy.

### Create A Basic Shortcode

See **WPSBasicShortcode** class defined in **app > Public > Shortcodes > WPSBasicShortcode.php** to create a basic shortcode.

### Create An Advanced Shortcode

See **WPSShortcode** class defined in **app > Public > Shortcodes > WPSShortcode.php** to create an advanced shortcode.

### Create A Custom Route

To create a custom route page, open **routes.php** file located in **configs** directory. Next, add your custom route slug to the array defined by **routes** key.

For example, to create a custom route for `{site_url}/your-custom-slug`:

    return array(
        ...

        /**
         * You can add your custom routes below
         */

        'your-custom-slug'  => array(
            /**
             * Specify the view displayed by the route
             */
            'view'  => 'pages.my-plugin-custom-page',

            /**
             * Specify the page title
             */
            'title' => 'My Custom Route Page',
        ),

    );

Next, navigate to **views > public > pages** directory and create the view file for the route which will be **my-plugin-custom-page.php**. Add the code below to the view file:

    <?php get_header(); ?>

    <br /><br />
    <h2>
        <center> This is my custom page </center>
    </h2>
    <br /><br /><br />

    <?php get_footer(); ?>

### Create Custom Action And Filter Hook

You can add your custom action and filter hooks inside `register_add_action()` and `register_add_filter()` methods of **Hooks** class defined in **app > Hooks.php**, **app > Admin > Hooks.php**, and **app > Public > Hooks.php** file.

Action and Filter hooks defined in **app > Hooks.php** file are run at both the admin area and site front end. Those defined in **app > Admin > Hooks.php** file are run in the admin area only. Those defined in **app > Public > Hooks.php** file are run at the site front end only.

You can choose to delete or modify the default action and filter hooks defined inside `register_add_action()` and `register_add_filter()` methods of **Hooks** class.

### Create A Custom Function

**app > functions.php** file is where you define custom functions you will need while creating your plugin.

### Define Custom Constants

You can define constants for your plugin inside the **define_constants()** method in **app > Constants.php** file.

### Bind Classes To Plugin Core

**app > Bindings.php** contains **Bindings** class, where you register classes that will add functionalities (like creating post columns, admin notices, e.t.c) to your plugin. The **Bindings** class file contains examples of default classes that have been registered with our theme. You can choose to comment them out.

## Fix For Class Namespace Conflicts

To prevent *namespace* conflicts, ensure that classes you create in the **app** directory have unique namespace. Example: You can choose to prefix namespaces for classes in **app** directory with **Plugin_Name**. Then you change all occurence of `WPS_Plugin\App;` namespace to `Plugin_Name\WPS_Plugin\App`.

    <?php
    ...

    // namespace WPS_Plugin\App;
    namespace Plugin_Name\WPS_Plugin\App;

    // use WPS_Plugin\App\...;
    use Plugin_Name\WPS_Plugin\App\...;

    ...

Next, you open **autoload.php** and change `$namespace = 'WPS_Plugin\App';` to `$namespace = 'Plugin_Name\WPS_Plugin\App';` inside `wps_autoloader()` function.

    <?php
    ...

    function wps_autoloader( string $class ) : void
    {
        // $namespace = 'WPS_Plugin\App';
        $namespace = 'Plugin_Name\WPS_Plugin\App';

        ...
    }

Classes in **src** directory should also have unique namespace that will not conflict with other namespaces that may be registered by another plugin. This will help prevent namespace conflicts that can occur between two or more WordPress plugins built with different versions of **WordPress Plugin Starter**. Example: `Codestartechnologies\WordpressPluginStarter\Abstracts;` namespace can be modified to `Plugin_Name\Codestartechnologies\WordpressPluginStarter\Abstracts;`.

    <?php
    ...

    // namespace Codestartechnologies\WordpressPluginStarter\Abstracts;
    namespace Plugin_Name\Codestartechnologies\WordpressPluginStarter\Abstracts;

    // use Codestartechnologies\WordpressPluginStarter\...;
    use Plugin_Name\Codestartechnologies\WordpressPluginStarter\...;

    ...

We are currently working on a feature that will enable developers automatically generate custom namespace prefix for classes in the **src** and **app** directory from their C.L.I, rather than editing all the files manualy.

## License

AGPL-3.0-or-later
